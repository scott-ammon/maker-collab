<div class="map-container row">
	<div class="col l1 m8 s12">
		<div class="map" id="map"></div>
	</div>
</div>


<script>
mapboxgl.accessToken = 'pk.eyJ1Ijoic2NvdHRhbW1vbiIsImEiOiJjaml0NGg3cmExY3RiM3ZycWhiaXBuMW1jIn0.jKNpU_--8pLwkTAoNaYc-A';

var map = new mapboxgl.Map({
container: 'map',
style: 'mapbox://styles/scottammon/cjit4mrto3t7j2rmsf423fo2u'
});

var projects = <%- JSON.stringify(projects) %>;

projects.forEach(function(project) {
  
  for(let i = 0; i < project.tags.length; i++) {
    console.log(project.tags[i]);
  }

	if(project.lng && project.lat) {
    var marker = new mapboxgl.Marker()
    .setLngLat([project.lng, project.lat])
    .setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups
    .setHTML("<a href='/projects/" + project.id + "'>" + project.title + "</a>"))
    .addTo(map);
  }
});

</script>